{% load static %}
<!-- Кнопка или ссылка -->
<img class="like-img register-btn" src="{% static 'images/Vector.png' %}"
     data-product-id="{{product.pk}}"
     style="cursor:pointer;">
<!-- Модальное окно (скрыто по умолчанию) -->
<div id="registerModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5);">
  <div style="background:#fff; margin: 10% auto; padding:20px; width:300px; position:relative;">
    <h2>Зарегистрируйтесь</h2>
    <p>Чтобы продолжить, пожалуйста, зарегистрируйтесь или войдите.</p>
    <a href="{% url 'register' %}">Регистрация</a> | <a href="{% url 'view' %}">Войти</a>
    <button id="closeModal">Закрыть</button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Передача статуса авторизации из Django в JS
  const isAuthenticated = {{ is_authenticated|yesno:"true,false" }};

  document.querySelectorAll('.register-btn').forEach(function(btn) {
    btn.addEventListener('click', function() {
      if (!isAuthenticated) {
        document.getElementById('registerModal').style.display = 'block';
      } else {
        window.location.href = '{% url "view" %}';
      }
    });
  });

  document.getElementById('closeModal').addEventListener('click', function() {
    document.getElementById('registerModal').style.display = 'none';
  });
});
</script>